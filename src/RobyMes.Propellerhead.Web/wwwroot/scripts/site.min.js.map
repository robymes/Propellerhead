{"version":3,"sources":["Utils.js","ApiService.js","ApplicationBus.js","CustomerListViewModel.js","NewCustomerViewModel.js","IndexApp.js"],"names":["this","ptt","ajax","type","url","data","contentType","cors","headers","options","cache","crossDomain","JSON","stringify","jQuery","postJson","getJson","ctor","self","route","location","host","getCustomersServiceUrl","getCustomersOrderByNameServiceUrl","getCustomersOrderByCreationDateServiceUrl","newCustomerServiceUrl","getCustomers","pageSize","pageIndex","request","PageSize","PageIndex","NameFilter","CreatioDateFilter","CustomerStatusFilter","getCustomersOrderByName","ascending","Query","Ascending","getCustomersOrderByCreationDate","newCustomer","name","Name","ApiService","newCustomerAdded","Bacon","Bus","ApplicationBus","apiService","applicationBus","loadItems","loadItemsOrderedByName","loadItemsOrderedByCreationDate","noOrdering","ascOrdering","items","ko","observableArray","errorMessage","observable","nameOrdering","creationdateOrdering","orderByName","orderByCreationDate","pageindex","done","removeAll","fail","error","onValue","onError","message","init","CustomerListViewModel","canInsertNewItem","computed","insertNewItem","result","push","Error","NewCustomerViewModel","viewModel","customerList","applyBindings","IndexApp"],"mappings":"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","file":"site.min.js","sourcesContent":["this.ptt = (function (ptt) {\r\n    ptt.ajax = function (type, url, data, contentType, cors, headers) {\r\n        var options = {\r\n            url: url,\r\n            contentType: contentType || \"application/json\",\r\n            cache: false,\r\n            type: type,\r\n            crossDomain: cors,\r\n            data: data ? JSON.stringify(data) : null\r\n        };\r\n        if (headers) {\r\n            options.headers = headers;\r\n        }\r\n        return jQuery.ajax(options);\r\n    };\r\n    ptt.postJson = function (url, data, cors) {\r\n        return ptt.ajax(\"POST\", url, data, null, cors, null);\r\n    };\r\n    ptt.getJson = function (url, cors) {\r\n        return ptt.ajax(\"GET\", url, null, null, cors, null);\r\n    };\r\n    return ptt;\r\n}(this.ptt || {}));","this.ptt = (function (ptt) {\r\n    var ctor = function () {\r\n        var self = this,\r\n            route = \"http://\" + location.host + \"/api/\",\r\n            getCustomersServiceUrl = route + \"GetCustomers\",\r\n            getCustomersOrderByNameServiceUrl = route + \"GetCustomersOrderByName\",\r\n            getCustomersOrderByCreationDateServiceUrl = route + \"GetCustomersOrderByCreationDate\",\r\n            newCustomerServiceUrl = route + \"NewCustomer\";\r\n\r\n        self.getCustomers = function (pageSize, pageIndex) {\r\n            var request = {\r\n                PageSize: pageSize,\r\n                PageIndex: pageIndex,\r\n                NameFilter: null,\r\n                CreatioDateFilter: null,\r\n                CustomerStatusFilter: null\r\n            };\r\n            return ptt.postJson(getCustomersServiceUrl, request, false);\r\n        };\r\n\r\n        self.getCustomersOrderByName = function (pageSize, pageIndex, ascending) {\r\n            var request = {\r\n                Query: {\r\n                    PageSize: pageSize,\r\n                    PageIndex: pageIndex,\r\n                    NameFilter: null,\r\n                    CreatioDateFilter: null,\r\n                    CustomerStatusFilter: null\r\n                },\r\n                Ascending: ascending\r\n            };\r\n            return ptt.postJson(getCustomersOrderByNameServiceUrl, request, false);\r\n        };\r\n\r\n        self.getCustomersOrderByCreationDate = function (pageSize, pageIndex, ascending) {\r\n            var request = {\r\n                Query: {\r\n                    PageSize: pageSize,\r\n                    PageIndex: pageIndex,\r\n                    NameFilter: null,\r\n                    CreatioDateFilter: null,\r\n                    CustomerStatusFilter: null\r\n                },\r\n                Ascending: ascending\r\n            };\r\n            return ptt.postJson(getCustomersOrderByCreationDateServiceUrl, request, false);\r\n        };\r\n\r\n        self.newCustomer = function (name) {\r\n            var request = {\r\n                Name: name\r\n            };\r\n            return ptt.postJson(newCustomerServiceUrl, request, false);\r\n        };\r\n    };\r\n    ptt.ApiService = function () {\r\n        return new ctor();\r\n    };\r\n    return ptt;\r\n}(this.ptt || {}));","this.ptt = (function (ptt) {\r\n    var ctor = function () {\r\n        var self = this;\r\n\r\n        self.newCustomerAdded = new Bacon.Bus();\r\n    };\r\n    ptt.ApplicationBus = function () {\r\n        return new ctor();\r\n    };\r\n    return ptt;\r\n}(this.ptt || {}));","this.ptt = (function (ptt) {\r\n    var ctor = function (apiService, applicationBus) {\r\n        var self = this,\r\n            noOrdering = \"glyphicon-minus\",\r\n            ascOrdering = \"glyphicon-chevron-up\",\r\n            descOrdering = \"glyphicon-chevron-down\",\r\n            loadItems,\r\n            loadItemsOrderedByName,\r\n            loadItemsOrderedByCreationDate;\r\n\r\n        self.items = ko.observableArray([]);\r\n        self.errorMessage = ko.observable(\"\");\r\n        self.nameOrdering = ko.observable(noOrdering);\r\n        self.creationdateOrdering = ko.observable(noOrdering);\r\n\r\n        self.orderByName = function () {\r\n            self.creationdateOrdering(noOrdering);\r\n            if (self.nameOrdering() == ascOrdering) {\r\n                self.nameOrdering(descOrdering);\r\n                loadItemsOrderedByName(10, 0, false);\r\n            } else {\r\n                self.nameOrdering(ascOrdering);\r\n                loadItemsOrderedByName(10, 0, true);\r\n            }\r\n        };\r\n\r\n        self.orderByCreationDate = function () {\r\n            self.nameOrdering(noOrdering);\r\n            if (self.creationdateOrdering() == ascOrdering) {\r\n                self.creationdateOrdering(descOrdering);\r\n                loadItemsOrderedByCreationDate(10, 0, false);\r\n            } else {\r\n                self.creationdateOrdering(ascOrdering);\r\n                loadItemsOrderedByCreationDate(10, 0, true);\r\n            }\r\n        };\r\n\r\n        loadItems = function (pageSize, pageindex) {\r\n            self.nameOrdering(noOrdering);\r\n            self.creationdateOrdering(noOrdering);\r\n            apiService.getCustomers(pageSize, pageindex)\r\n                .done(function (items) {\r\n                    self.items.removeAll();\r\n                    self.items(items);\r\n                })\r\n                .fail(function (error) {\r\n                    self.errorMessage(\"An error has occurred loading customers\");\r\n                });\r\n        };\r\n\r\n        loadItemsOrderedByName = function (pageSize, pageindex, ascending) {\r\n            apiService.getCustomersOrderByName(pageSize, pageindex, ascending)\r\n                .done(function (items) {\r\n                    self.items.removeAll();\r\n                    self.items(items);\r\n                })\r\n                .fail(function (error) {\r\n                    self.errorMessage(\"An error has occurred loading customers\");\r\n                });\r\n        };\r\n\r\n        loadItemsOrderedByCreationDate = function (pageSize, pageindex, ascending) {\r\n            apiService.getCustomersOrderByCreationDate(pageSize, pageindex, ascending)\r\n                .done(function (items) {\r\n                    self.items.removeAll();\r\n                    self.items(items);\r\n                })\r\n                .fail(function (error) {\r\n                    self.errorMessage(\"An error has occurred loading customers\");\r\n                });\r\n        };\r\n\r\n        applicationBus.newCustomerAdded\r\n            .onValue(function () {\r\n                loadItems(10, 0);\r\n            });\r\n\r\n        applicationBus.newCustomerAdded\r\n            .onError(function (error) {\r\n                self.errorMessage(error.message);\r\n            });\r\n\r\n        self.init = function () {\r\n            self.errorMessage(\"\");\r\n            self.nameOrdering(noOrdering);\r\n            self.creationdateOrdering(noOrdering);\r\n            loadItems(10, 0);\r\n        };\r\n    };\r\n    ptt.CustomerListViewModel = function (apiService, applicationBus) {\r\n        return new ctor(apiService, applicationBus);\r\n    };\r\n    return ptt;\r\n}(this.ptt || {}));","this.ptt = (function (ptt) {\r\n    var ctor = function (apiService, applicationBus) {\r\n        var self = this;\r\n\r\n        self.name = ko.observable(\"\");\r\n\r\n        self.canInsertNewItem = ko.computed(function () {\r\n            return self.name() && true;\r\n        }, self);\r\n\r\n        self.insertNewItem = function () {\r\n            apiService.newCustomer(self.name())\r\n                .done(function (result) {\r\n                    self.name(\"\");\r\n                    applicationBus.newCustomerAdded.push(true);\r\n                })\r\n                .fail(function () {\r\n                    applicationBus.newCustomerAdded.error(new Bacon.Error(\"Error inserting a new Customer\"));\r\n                });\r\n        };\r\n    };\r\n    ptt.NewCustomerViewModel = function (apiService, applicationBus) {\r\n        return new ctor(apiService, applicationBus);\r\n    };\r\n    return ptt;\r\n}(this.ptt || {}));","this.ptt = (function (ptt) {\r\n    var ctor = function () {\r\n        var apiService = ptt.ApiService(),\r\n            applicationBus = ptt.ApplicationBus(),\r\n            viewModel = {\r\n                customerList: ptt.CustomerListViewModel(apiService, applicationBus),\r\n                newCustomer: ptt.NewCustomerViewModel(apiService, applicationBus)\r\n            };\r\n        ko.applyBindings(viewModel);\r\n        viewModel.customerList.init();\r\n    };\r\n    ptt.IndexApp = function () {\r\n        return new ctor();\r\n    };\r\n    return ptt;\r\n}(this.ptt || {}));"]}