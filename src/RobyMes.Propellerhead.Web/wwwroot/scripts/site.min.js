this.ptt=function(n){return n.ajax=function(n,t,a,u,l,r){var e={url:t,contentType:u||"application/json",cache:!1,type:n,crossDomain:l,data:a?JSON.stringify(a):null};return r&&(e.headers=r),jQuery.ajax(e)},n.postJson=function(t,a,u){return n.ajax("POST",t,a,null,u,null)},n.getJson=function(t,a){return n.ajax("GET",t,null,null,a,null)},n}(this.ptt||{});
this.ptt=function(t){var e=function(){var e=this,r="http://"+location.host+"/api/",n=r+"GetCustomers",u=r+"GetCustomersOrderByName",s=r+"GetCustomersOrderByCreationDate",o=r+"GetCustomerById",a=r+"NewCustomer",i=r+"UpdateCustomerStatus";e.getCustomers=function(e,r){var u={PageSize:e,PageIndex:r,NameFilter:null,CreatioDateFilter:null,CustomerStatusFilter:null};return t.postJson(n,u,!1)},e.getCustomersOrderByName=function(e,r,n){var s={Query:{PageSize:e,PageIndex:r,NameFilter:null,CreatioDateFilter:null,CustomerStatusFilter:null},Ascending:n};return t.postJson(u,s,!1)},e.getCustomersOrderByCreationDate=function(e,r,n){var u={Query:{PageSize:e,PageIndex:r,NameFilter:null,CreatioDateFilter:null,CustomerStatusFilter:null},Ascending:n};return t.postJson(s,u,!1)},e.getCustomerById=function(e){var r={id:e};return t.postJson(o,r,!1)},e.newCustomer=function(e){var r={name:e};return t.postJson(a,r,!1)},e.updateCustomerStatus=function(e,r){var n={id:e,status:r};return t.postJson(i,n,!1)}};return t.ApiService=function(){return new e},t}(this.ptt||{});
this.ptt=function(t){var n=function(){this.newCustomerAdded=new Bacon.Bus};return t.ApplicationBus=function(){return new n},t}(this.ptt||{});
this.ptt=function(e){var r=function(e,r){var n,o,i,t=this,a="glyphicon-minus",s="glyphicon-chevron-up";t.items=ko.observableArray([]),t.errorMessage=ko.observable(""),t.nameOrdering=ko.observable(a),t.creationdateOrdering=ko.observable(a),t.orderByName=function(){t.creationdateOrdering(a),t.nameOrdering()==s?(t.nameOrdering("glyphicon-chevron-down"),o(10,0,!1)):(t.nameOrdering(s),o(10,0,!0))},t.orderByCreationDate=function(){t.nameOrdering(a),t.creationdateOrdering()==s?(t.creationdateOrdering("glyphicon-chevron-down"),i(10,0,!1)):(t.creationdateOrdering(s),i(10,0,!0))},n=function(r,n){t.nameOrdering(a),t.creationdateOrdering(a),e.getCustomers(r,n).done(function(e){t.items.removeAll(),t.items(e)}).fail(function(e){t.errorMessage("An error has occurred loading customers")})},o=function(r,n,o){e.getCustomersOrderByName(r,n,o).done(function(e){t.items.removeAll(),t.items(e)}).fail(function(e){t.errorMessage("An error has occurred loading customers")})},i=function(r,n,o){e.getCustomersOrderByCreationDate(r,n,o).done(function(e){t.items.removeAll(),t.items(e)}).fail(function(e){t.errorMessage("An error has occurred loading customers")})},r.newCustomerAdded.onValue(function(){n(10,0)}),r.newCustomerAdded.onError(function(e){t.errorMessage(e.message)}),t.init=function(){t.errorMessage(""),t.nameOrdering(a),t.creationdateOrdering(a),n(10,0)}};return e.CustomerListViewModel=function(e,n){return new r(e,n)},e}(this.ptt||{});
this.ptt=function(e){var n=function(e,n){var t=this;t.name=ko.observable(""),t.canInsertNewItem=ko.computed(function(){return t.name()&&!0},t),t.insertNewItem=function(){e.newCustomer(t.name()).done(function(e){t.name(""),n.newCustomerAdded.push(!0)}).fail(function(){n.newCustomerAdded.error(new Bacon.Error("Error inserting a new Customer"))})}};return e.NewCustomerViewModel=function(e,t){return new n(e,t)},e}(this.ptt||{});
this.ptt=function(e){var t=function(e,t,r){var o,s=this,n=!1;s.name=ko.observable(""),s.errorMessage=ko.observable(""),s.creationDate=ko.observable(""),s.status=ko.observable(""),s.statusList=ko.observableArray(["Prospective","Current","NonActive"]),s.status.subscribe(function(t){1==n?e.updateCustomerStatus(r,t).done(function(){s.errorMessage("")}).fail(function(e){s.errorMessage("An error has occurred updating status")}):n=!0}),o=function(t){e.getCustomerById(t).done(function(e){s.errorMessage(""),s.name(e.name),s.creationDate(e.creationDate),s.status(e.status)}).fail(function(e){s.errorMessage("An error has occurred loading customer")})},s.init=function(){o(r)}};return e.CustomerViewModel=function(e,r,o){return new t(e,r,o)},e}(this.ptt||{});
this.ptt=function(t){var i=function(){var i=t.ApiService(),e=t.ApplicationBus(),n={customerList:t.CustomerListViewModel(i,e),newCustomer:t.NewCustomerViewModel(i,e)};ko.applyBindings(n),n.customerList.init()};return t.IndexApp=function(){return new i},t}(this.ptt||{});
this.ptt=function(t){var i=function(i){var n=t.ApiService(),e=t.ApplicationBus(),r={customer:t.CustomerViewModel(n,e,i)};ko.applyBindings(r),r.customer.init()};return t.CustomerApp=function(t){return new i(t)},t}(this.ptt||{});
//# sourceMappingURL=site.min.js.map
