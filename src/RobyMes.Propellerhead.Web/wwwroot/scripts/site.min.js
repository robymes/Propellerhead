this.ptt=function(n){return n.ajax=function(n,t,a,u,l,r){var e={url:t,contentType:u||"application/json",cache:!1,type:n,crossDomain:l,data:a?JSON.stringify(a):null};return r&&(e.headers=r),jQuery.ajax(e)},n.postJson=function(t,a,u){return n.ajax("POST",t,a,null,u,null)},n.getJson=function(t,a){return n.ajax("GET",t,null,null,a,null)},n}(this.ptt||{});
this.ptt=function(t){var e=function(){var e=this,r="http://"+location.host+"/api/",n=r+"GetCustomers",u=r+"GetCustomersOrderByName",o=r+"GetCustomersOrderByCreationDate",s=r+"GetCustomerById",a=r+"NewCustomer",i=r+"UpdateCustomerStatus",l=r+"AddCustomerNote";e.getCustomers=function(e,r){var u={pageSize:e,pageIndex:r,nameFilter:null,creatioDateFilter:null,customerStatusFilter:null};return t.postJson(n,u,!1)},e.getCustomersOrderByName=function(e,r,n){var o={Query:{pageSize:e,pageIndex:r,nameFilter:null,creatioDateFilter:null,customerStatusFilter:null},ascending:n};return t.postJson(u,o,!1)},e.getCustomersOrderByCreationDate=function(e,r,n){var u={Query:{pageSize:e,pageIndex:r,nameFilter:null,creatioDateFilter:null,customerStatusFilter:null},ascending:n};return t.postJson(o,u,!1)},e.getCustomerById=function(e){var r={id:e};return t.postJson(s,r,!1)},e.newCustomer=function(e){var r={name:e};return t.postJson(a,r,!1)},e.updateCustomerStatus=function(e,r){var n={id:e,status:r};return t.postJson(i,n,!1)},e.addCustomerNote=function(e,r){var n={id:e,note:r};return t.postJson(l,n,!1)}};return t.ApiService=function(){return new e},t}(this.ptt||{});
this.ptt=function(n){var t=function(){var n=this;n.newCustomerAdded=new Bacon.Bus,n.newNoteAdded=new Bacon.Bus};return n.ApplicationBus=function(){return new t},n}(this.ptt||{});
this.ptt=function(e){var r=function(e,r){var n,o,i,t=this,s="glyphicon-minus",a="glyphicon-chevron-up";t.items=ko.observableArray([]),t.errorMessage=ko.observable(""),t.nameOrdering=ko.observable(s),t.creationdateOrdering=ko.observable(s),t.orderByName=function(){t.creationdateOrdering(s),t.nameOrdering()==a?(t.nameOrdering("glyphicon-chevron-down"),o(10,0,!1)):(t.nameOrdering(a),o(10,0,!0))},t.orderByCreationDate=function(){t.nameOrdering(s),t.creationdateOrdering()==a?(t.creationdateOrdering("glyphicon-chevron-down"),i(10,0,!1)):(t.creationdateOrdering(a),i(10,0,!0))},n=function(r,n){t.nameOrdering(s),t.creationdateOrdering(s),e.getCustomers(r,n).done(function(e){t.errorMessage(""),t.items.removeAll(),t.items(e)}).fail(function(e){t.errorMessage("An error has occurred loading customers")})},o=function(r,n,o){e.getCustomersOrderByName(r,n,o).done(function(e){t.errorMessage(""),t.items.removeAll(),t.items(e)}).fail(function(e){t.errorMessage("An error has occurred loading customers")})},i=function(r,n,o){e.getCustomersOrderByCreationDate(r,n,o).done(function(e){t.errorMessage(""),t.items.removeAll(),t.items(e)}).fail(function(e){t.errorMessage("An error has occurred loading customers")})},r.newCustomerAdded.onValue(function(){t.errorMessage(""),n(10,0)}),r.newCustomerAdded.onError(function(e){t.errorMessage(e.message)}),t.init=function(){t.errorMessage(""),t.nameOrdering(s),t.creationdateOrdering(s),n(10,0)}};return e.CustomerListViewModel=function(e,n){return new r(e,n)},e}(this.ptt||{});
this.ptt=function(e){var n=function(e,n){var t=this;t.name=ko.observable(""),t.canInsertNewItem=ko.computed(function(){return t.name()&&!0},t),t.insertNewItem=function(){e.newCustomer(t.name()).done(function(e){t.name(""),n.newCustomerAdded.push(!0)}).fail(function(){n.newCustomerAdded.error(new Bacon.Error("Error inserting a new Customer"))})}};return e.NewCustomerViewModel=function(e,t){return new n(e,t)},e}(this.ptt||{});
this.ptt=function(e){var r=function(e,r,t){var o,s=this,n=!1;s.name=ko.observable(""),s.errorMessage=ko.observable(""),s.creationDate=ko.observable(""),s.status=ko.observable(""),s.statusList=ko.observableArray(["Prospective","Current","NonActive"]),s.notes=ko.observableArray([]),s.status.subscribe(function(r){1==n?e.updateCustomerStatus(t,r).done(function(){s.errorMessage("")}).fail(function(e){s.errorMessage("An error has occurred updating status")}):n=!0}),o=function(r){e.getCustomerById(r).done(function(e){s.errorMessage(""),s.name(e.name),s.creationDate(e.creationDate),s.status(e.status),s.notes.removeAll(),s.notes(e.notes)}).fail(function(e){s.errorMessage("An error has occurred loading customer")})},r.newNoteAdded.onValue(function(){s.errorMessage(""),n=!1,o(t)}),r.newNoteAdded.onError(function(e){s.errorMessage(e.message)}),s.init=function(){o(t)}};return e.CustomerViewModel=function(e,t,o){return new r(e,t,o)},e}(this.ptt||{});
this.ptt=function(e){var n=function(e,n,t){var o=this;o.note=ko.observable(""),o.canInsertNewNote=ko.computed(function(){return o.note()&&!0},o),o.insertNewNote=function(){e.addCustomerNote(t,o.note()).done(function(e){o.note(""),n.newNoteAdded.push(!0)}).fail(function(){n.newNoteAdded.error(new Bacon.Error("Error inserting a new Note"))})}};return e.NewNoteViewModel=function(e,t,o){return new n(e,t,o)},e}(this.ptt||{});
this.ptt=function(t){var i=function(){var i=t.ApiService(),e=t.ApplicationBus(),n={customerList:t.CustomerListViewModel(i,e),newCustomer:t.NewCustomerViewModel(i,e)};ko.applyBindings(n),n.customerList.init()};return t.IndexApp=function(){return new i},t}(this.ptt||{});
this.ptt=function(t){var e=function(e){var i=t.ApiService(),n=t.ApplicationBus(),o={customer:t.CustomerViewModel(i,n,e),newNote:t.NewNoteViewModel(i,n,e)};ko.applyBindings(o),o.customer.init()};return t.CustomerApp=function(t){return new e(t)},t}(this.ptt||{});
//# sourceMappingURL=site.min.js.map
